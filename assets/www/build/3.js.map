{"version":3,"sources":["../../src/pages/login/login.module.ts","../../src/components/components.module.ts","../../src/lib/pipes/responsiveDate.ts","../../src/lib/pipes/maxValue.ts","../../src/lib/pipes/filenameLimit.ts","../../src/components/userImage.ts","../../src/components/navigator/navigator.ts","../../src/components/load.ts","../../src/assets/images/icons ^/.//.*/.svg$","../../src/assets/images/icons/add.svg","../../src/assets/images/icons/added.svg","../../src/assets/images/icons/deny.svg","../../src/assets/images/icons/write.svg","../../src/components/loadingProgress.ts","../../src/components/hexagon.ts","../../src/components/navigator/hexagon.ts","../../src/components/navigator/icon.ts","../../src/lib/services/login.service.ts","../../src/pages/login/login.ts","../../src/lib/services/passwordStrength.service.ts","../../src/lib/services/registerService.js"],"names":["keyStoreService","require","default","socketService","Profile","Storage","errorService","errorServiceInstance","Bluebird","h","trustManager","SecuredData","keyGenPromise","sessionStorage","withPrefix","clientStorage","registerPromise","registerService","register","nickname","mail","password","profile","settings","inviteCode","keys","try","register1","startKeyGeneration","then","register2","theKeys","setKeyGenIdentifier","Error","privateProfile","content","priv","privateProfileMe","objectJoin","pub","nobody","meta","myProfile","publicProfile","isPublicProfile","correctKeys","objectMap","correctKeyIdentifier","ownKeys","main","sign","signedKeys","load","undefined","type","allow","all","signAndEncrypt","createAsync","security","makePWVerifiable","random","hex","sym","pwEncryptKey","symEncryptKey","friends","spread","register3","signedOwnKeys","salt","disallow","registerData","hash","hashPW","upload","getKey","me","preID","get","emit","result","sid","set","userid","setPassword","finally","setPreID","awaitConnection","id","catch","criticalError","toGenKeys","ks","getCorrectKeystore","key","map","generateKey","resultKeys","index","resultKey","thenReturn","mailUsed","callback","isMail","resolve","nodeify","mailCheck","mailResult","data","nicknameUsed","isNickname","nicknameResult","module","exports"],"mappings":"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","file":"3.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\n\nimport { LoginPage } from './login'\n\nimport { ComponentsModule } from '../../components/components.module'\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n\tdeclarations: [\n\t\tLoginPage,\n\t],\n\timports: [\n\t\tIonicPageModule.forChild(LoginPage),\n\t\tTranslateModule.forChild(),\n\t\tComponentsModule,\n\t],\n\tentryComponents: [\n\t\tLoginPage,\n\t]\n})\nexport class LoginPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ts","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IonicModule } from 'ionic-angular';\n\nimport { ResponsiveDatePipe } from \"../lib/pipes/responsiveDate\";\nimport { MaxValuePipe } from \"../lib/pipes/maxValue\";\nimport { FilenameLimitPipe } from \"../lib/pipes/filenameLimit\";\n\nimport { UserImageComponent } from \"./userImage\";\nimport { Navigator } from \"./navigator/navigator\";\nimport { LoadComponent } from \"./load\"\nimport { LoadingProgress } from \"./loadingProgress\"\n\nimport { HexagonComponent } from \"./hexagon\";\nimport { NavigatorHexagon } from \"./navigator/hexagon\";\nimport { NavigatorIcon } from \"./navigator/icon\";\n\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n\tdeclarations: [\n\t\tResponsiveDatePipe,\n\t\tMaxValuePipe,\n\t\tFilenameLimitPipe,\n\t\tUserImageComponent,\n\t\tLoadComponent,\n\t\tLoadingProgress,\n\t\tHexagonComponent,\n\t\tNavigator,\n\t\tNavigatorHexagon,\n\t\tNavigatorIcon\n\t],\n\timports: [\n\t\tIonicModule,\n\t\tCommonModule,\n\t\tTranslateModule.forChild()\n\t],\n\texports: [\n\t\tResponsiveDatePipe,\n\t\tMaxValuePipe,\n\t\tFilenameLimitPipe,\n\t\tUserImageComponent,\n\t\tLoadComponent,\n\t\tLoadingProgress,\n\t\tHexagonComponent,\n\t\tCommonModule,\n\t\tNavigator,\n\t\tNavigatorHexagon,\n\t\tNavigatorIcon,\n\t]\n})\nexport class ComponentsModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/components.module.ts","import { Pipe } from \"@angular/core\";\nimport { DatePipe } from \"@angular/common\"; // tslint:disable-line:no-unused-variable\n\n@Pipe({\n\tname: \"responsiveDate\"\n})\nexport class ResponsiveDatePipe {\n\n\tconstructor(private datePipe: DatePipe) {}\n\n\ttransform(value: any): string {\n\t\tif(!value) {\n\t\t\treturn \"\";\n\t\t}\n\n\t\tif(typeof value === \"number\") {\n\t\t\tvalue = new Date(value);\n\t\t}\n\n\t\tlet format: string;\n\n\t\tlet now: Date = new Date();\n\t\tnow.setHours(0, 0, 0, 0);\n\n\t\tlet date_norm: Date = new Date(value);\n\t\tdate_norm.setHours(0, 0, 0, 0);\n\n\t\tconst diff_norm: number = (now.getTime() - date_norm.getTime()) / 1000;\n\n\t\tconst YESTERDAY = 24 * 60 * 60\n\n\t\tif(diff_norm === 0) { // same day\n\t\t\tformat = \"HH:mm\";\n\t\t} else if(diff_norm == YESTERDAY) {\n\t\t\treturn \"Yesterday\";\n\t\t} else if(diff_norm <= YESTERDAY * 6) {\n\t\t\tformat = \"EEEE\";\n\t\t} else {\n\t\t\tformat = \"dd.MM.y\"\n\t\t}\n\n\t\treturn this.datePipe.transform(value, format);\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/pipes/responsiveDate.ts","import { Pipe, PipeTransform } from \"@angular/core\"; // tslint:disable-line:no-unused-variable\n\n@Pipe({name: \"maxValue\"})\nexport class MaxValuePipe implements PipeTransform {\n\ttransform(value: number, max: number): string {\n\t\tif(value > max) {\n\t\t\treturn max + \"+\";\n\t\t}\n\t\treturn value.toString();\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/pipes/maxValue.ts","import { Pipe, PipeTransform } from \"@angular/core\"; // tslint:disable-line:no-unused-variable\n\n@Pipe({name: \"filenameLimit\"})\nexport class FilenameLimitPipe implements PipeTransform {\n\ttransform(str: string, max: number): string {\n\t\tif(str.length > max) {\n\t\t\tlet type = str.substring(str.lastIndexOf(\".\") + 1, str.length);\n\n\t\t\treturn `${str.substring(0, max - type.length - 3)}...${type}`;\n\t\t}\n\n\t\treturn str;\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/pipes/filenameLimit.ts","import { Component, Input } from \"@angular/core\";\n\nimport settings from \"../lib/services/settings.service\"\n\nconst DEFAULT_IMAGE = \"assets/img/user.png\"\n\n@Component({\n\tselector: \"user-image\",\n\ttemplateUrl: \"userImage.svg\"\n})\nexport class UserImageComponent {\n\tprivate _image: string = DEFAULT_IMAGE\n\n\t@Input() hideBlocked = true\n\n\t@Input()\n\tset image(image: string) {\n\t\tif (image) {\n\t\t\tthis._image = image\n\t\t\treturn\n\t\t}\n\n\t\tthis._image = DEFAULT_IMAGE\n\t}\n\n\tget image(): string {\n\t\tif (this.hideBlocked && settings.isBlocked(parseInt(this.id, 10))) {\n\t\t\treturn \"assets/img/blocked.png\"\n\t\t}\n\n\t\treturn this._image;\n\t}\n\n\t@Input() id: string;\n\n\trandomId: string = Math.random().toString()\n\n\tgetId() {\n\t\treturn `userimage-${this.id}-${this.randomId}`\n\t}\n\n\tgetUrl() {\n\t\treturn `url(#${this.getId()})`\n\t}\n\n\tconstructor() {};\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/userImage.ts","import { Component, Input, Output, EventEmitter } from \"@angular/core\"\nimport { NavController } from \"ionic-angular\"\n\nimport sessionService from \"../../lib/services/session.service\"\n\nconst EASTER_EGG_THRESHOLD = 10 * 1000\n\ninterface NodeWithBounds {\n\tnode: Element,\n\tbounds: ClientRect\n}\n\n@Component({\n\tselector: \"navigator\",\n\ttemplateUrl: \"navigator.html\"\n})\nexport class Navigator {\n\n\t@Input() icon: string = \"plus\"\n\n\t@Output() invoke = new EventEmitter()\n\n\tconstructor(private navCtrl: NavController) {}\n\n\topen = false\n\n\tcloseOnTouchEnd = false\n\n\tprofile: NodeWithBounds = null\n\tsearch: NodeWithBounds = null\n\tcontacts: NodeWithBounds = null\n\tsettings: NodeWithBounds = null\n\n\tonTap = () => {\n\t\tclearTimeout(this.easterEgg)\n\t\tif (this.open) {\n\t\t\tthis.open = false\n\t\t} else {\n\t\t\tthis.invoke.emit()\n\t\t}\n\t}\n\n\tonPress = () => {\n\t\tif (this.open) {\n\t\t\tthis.closeOnTouchEnd = true\n\t\t} else {\n\t\t\tthis.open = true;\n\t\t}\n\t}\n\n\teasterEgg = null\n\tenableEasterEgg = () => {\n\t\tconst navigators = document.querySelectorAll('.navigator');\n\t\tfor (let i = 0 ; i < navigators.length; i++) {\n\t\t\tnavigators.item(i).classList.add('easteregg')\n\t\t}\n\t}\n\n\tisOnSubmenu = (bounds: ClientRect, event: TouchEvent) => {\n\t\tconst { left, top, width: diameter } = bounds\n\t\tconst centerX = left + diameter / 2\n\t\tconst centerY = top + diameter / 2\n\t\tfor (let i = 0; i < event.changedTouches.length; i++) {\n\t\t\tconst { clientX, clientY } = event.changedTouches.item(i)\n\t\t\tconst distance = Math.sqrt(Math.pow(centerX - clientX, 2) + Math.pow(centerY - clientY, 2))\n\t\t\tif (distance < ( diameter / 2 ) * 1.5) return true\n\t\t}\n\t\treturn false\n\t}\n\n\tgetNodeWithBounds = (ancestor, selector) => {\n\t\tconst node = ancestor.querySelector(selector)\n\t\tconst bounds = node.getBoundingClientRect()\n\t\treturn { node, bounds }\n\t}\n\n\tonTouchStart = (e) => {\n\t\tlet menu = e.target\n\t\twhile (menu && !menu.classList.contains('navigator')) {\n\t\t\tmenu = menu.parentElement\n\t\t}\n\t\tif (menu) {\n\t\t\tthis.profile = this.getNodeWithBounds(menu, '.sub-menu.profile')\n\t\t\tthis.search = this.getNodeWithBounds(menu, '.sub-menu.search')\n\t\t\tthis.contacts = this.getNodeWithBounds(menu, '.sub-menu.contacts')\n\t\t\tthis.settings = this.getNodeWithBounds(menu, '.sub-menu.settings')\n\t\t}\n\t\tthis.easterEgg = setTimeout(this.enableEasterEgg, EASTER_EGG_THRESHOLD)\n\t}\n\n\tonTouchEnd = (e: TouchEvent) => {\n\t\tconst nodesWithBounds = [ this.search, this.profile, this.contacts, this.settings ]\n\t\tfor (let { node } of nodesWithBounds ) {\n\t\t\tnode.classList.remove('active')\n\t\t}\n\t\tif (this.open) {\n\t\t\tif (this.isOnSubmenu(this.profile.bounds, e)) this.invokeProfile()\n\t\t\tif (this.isOnSubmenu(this.search.bounds, e)) this.invokeSearch()\n\t\t\tif (this.isOnSubmenu(this.contacts.bounds, e)) this.invokeContacts()\n\t\t\tif (this.isOnSubmenu(this.settings.bounds, e)) this.invokeSettings()\n\t\t}\n\t\tif (this.closeOnTouchEnd) {\n\t\t\tthis.open = false\n\t\t\tthis.closeOnTouchEnd = false\n\t\t}\n\t\tclearTimeout(this.easterEgg)\n\t}\n\n\tonTouchMove = (e: TouchEvent) => {\n\t\tif (this.open) {\n\t\t\tfor (let { node, bounds } of [this.profile, this.contacts, this.settings, this.search]) {\n\t\t\t\tif (this.isOnSubmenu(bounds, e)) {\n\t\t\t\t\tnode.classList.add('active')\n\t\t\t\t} else {\n\t\t\t\t\tnode.classList.remove('active')\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\te.preventDefault()\n\t}\n\n\tclose() {\n\t\tclearTimeout(this.easterEgg)\n\t\tthis.open = false\n\t}\n\n\tinvokeProfile() {\n\t\tthis.close()\n\t\tconst userId = sessionService.userid\n\t\tthis.navCtrl.push(\"Profile\", { userId })\n\t}\n\n\tinvokeContacts() {\n\t\tthis.close()\n\t\tthis.navCtrl.push(\"Contacts\")\n\t}\n\n\tinvokeSearch() {\n\t\tthis.close()\n\t\tthis.navCtrl.push(\"Contacts\", { search: true })\n\t}\n\n\tinvokeSettings() {\n\t\tthis.close()\n\t\tthis.navCtrl.push(\"Settings\")\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/navigator/navigator.ts","import { Component, Input } from \"@angular/core\";\nimport { DomSanitizer } from \"@angular/platform-browser\"; // tslint:disable-line:no-unused-variable\n\n@Component({\n\tselector: \"load\",\n\ttemplate: `<div [innerHTML]=\"html\"></div>`\n})\nexport class LoadComponent {\n\tpublic html;\n\tconstructor(private sanitizer: DomSanitizer) {};\n\n\t@Input()\n\tset name(name: string) {\n\t\tconst icon = require(`../assets/images/icons/${name}.svg`)\n\n\t\tthis.html = this.sanitizer.bypassSecurityTrustHtml(icon)\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/load.ts","var map = {\n\t\"./add.svg\": 463,\n\t\"./added.svg\": 464,\n\t\"./deny.svg\": 465,\n\t\"./write.svg\": 466\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 462;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/images/icons ^\\.\\/.*\\.svg$\n// module id = 462\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"178\\\" height=\\\"206\\\" viewBox=\\\"0 0 89 103\\\">\\n  <metadata><?xpacket begin=\\\"﻿\\\" id=\\\"W5M0MpCehiHzreSzNTczkc9d\\\"?>\\n<x:xmpmeta xmlns:x=\\\"adobe:ns:meta/\\\" x:xmptk=\\\"Adobe XMP Core 5.6-c138 79.159824, 2016/09/14-01:09:01        \\\">\\n   <rdf:RDF xmlns:rdf=\\\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\\\">\\n      <rdf:Description rdf:about=\\\"\\\"/>\\n   </rdf:RDF>\\n</x:xmpmeta>\\n<?xpacket end=\\\"w\\\"?></metadata>\\n  <path id=\\\"add\\\" class=\\\"fill-primary\\\" d=\\\"M480.5,880L435.985,854.25V802.759L480.5,777.013l44.515,25.746V854.25ZM496,832H484v12h-7V832H465v-7h12V813h7v12h12v7Z\\\" transform=\\\"translate(-436 -777)\\\"/>\\n</svg>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/images/icons/add.svg\n// module id = 463\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"178\\\" height=\\\"206\\\" viewBox=\\\"0 0 89 103\\\">\\n  <metadata><?xpacket begin=\\\"﻿\\\" id=\\\"W5M0MpCehiHzreSzNTczkc9d\\\"?>\\n<x:xmpmeta xmlns:x=\\\"adobe:ns:meta/\\\" x:xmptk=\\\"Adobe XMP Core 5.6-c138 79.159824, 2016/09/14-01:09:01        \\\">\\n   <rdf:RDF xmlns:rdf=\\\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\\\">\\n      <rdf:Description rdf:about=\\\"\\\"/>\\n   </rdf:RDF>\\n</x:xmpmeta>\\n<?xpacket end=\\\"w\\\"?></metadata>\\n  <path id=\\\"added\\\" class=\\\"fill-primary\\\" d=\\\"M480.5,880L435.985,854.25V802.759L480.5,777.013l44.515,25.746V854.25Zm18.5-61.23-24.725,24.24-12.291-12.032,4.869-4.753,7.422,7.278,19.855-19.487Z\\\" transform=\\\"translate(-436 -777)\\\"/>\\n</svg>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/images/icons/added.svg\n// module id = 464\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"178\\\" height=\\\"206\\\" viewBox=\\\"0 0 89 103\\\">\\n  <metadata><?xpacket begin=\\\"﻿\\\" id=\\\"W5M0MpCehiHzreSzNTczkc9d\\\"?>\\n<x:xmpmeta xmlns:x=\\\"adobe:ns:meta/\\\" x:xmptk=\\\"Adobe XMP Core 5.6-c138 79.159824, 2016/09/14-01:09:01        \\\">\\n   <rdf:RDF xmlns:rdf=\\\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\\\">\\n      <rdf:Description rdf:about=\\\"\\\"/>\\n   </rdf:RDF>\\n</x:xmpmeta>\\n<?xpacket end=\\\"w\\\"?></metadata>\\n  <path id=\\\"deny\\\" class=\\\"fill-grey\\\" d=\\\"M953.5,880L908.985,854.25V802.759L953.5,777.013l44.515,25.746V854.25Zm8.485-38.061L953.5,833.45l-8.485,8.485-4.95-4.95,8.485-8.485-8.485-8.485,4.95-4.95,8.485,8.485,8.485-8.485,4.95,4.95L958.45,828.5l8.485,8.485Z\\\" transform=\\\"translate(-909 -777)\\\"/>\\n</svg>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/images/icons/deny.svg\n// module id = 465\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"178\\\" height=\\\"206\\\" viewBox=\\\"0 0 89 103\\\">\\n  <metadata><?xpacket begin=\\\"﻿\\\" id=\\\"W5M0MpCehiHzreSzNTczkc9d\\\"?>\\n<x:xmpmeta xmlns:x=\\\"adobe:ns:meta/\\\" x:xmptk=\\\"Adobe XMP Core 5.6-c138 79.159824, 2016/09/14-01:09:01        \\\">\\n   <rdf:RDF xmlns:rdf=\\\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\\\">\\n      <rdf:Description rdf:about=\\\"\\\"/>\\n   </rdf:RDF>\\n</x:xmpmeta>\\n<?xpacket end=\\\"w\\\"?></metadata>\\n  <path id=\\\"write_corner\\\" data-name=\\\"write corner\\\" class=\\\"fill-primaryDark\\\" d=\\\"M6.577,102l6.651-24.883L31.4,95.331Z\\\"/>\\n  <path id=\\\"write\\\" class=\\\"fill-primary\\\" d=\\\"M44.5,103L0,77.25V25.75L44.5,0,89,25.75v51.5ZM19,43.149V36.994H70V43.15H19ZM70,55.078H19V48.922H70v6.156ZM50,67.006H19V60.851H50v6.156Z\\\"/>\\n</svg>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/images/icons/write.svg\n// module id = 466\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11","import { Component, Input, ElementRef } from \"@angular/core\";\n\nconst INTERPOLATION_SCALING = 12\n\n@Component({\n\tselector: \"loading-progress\",\n\ttemplateUrl: \"loadingProgress.html\"\n})\nexport class LoadingProgress {\n\n\t@Input() className: string\n\t@Input() progress: any\n\t@Input() backgroundClass: string\n\t@Input() foregroundClass: string\n\n\tprivate _progressColor\n\tprivate _progressBackground\n\tprivate _background;\n\n\tprivate getBackgroundElement() {\n\t\tlet element = this.element.nativeElement.parentElement\n\t\twhile (element && !element.classList.contains(this.backgroundClass)) {\n\t\t\telement = element.parentElement\n\t\t}\n\t\treturn element\n\t}\n\n\tprivate getForegroundElement() {\n\t\tlet element = this.element.nativeElement.querySelector('.dummy')\n\t\treturn element.classList.contains(this.foregroundClass) ? element : null\n\t}\n\n\tprivate get progressColor() {\n\t\tif (!this._progressColor) {\n\t\t\tconst element = this.getForegroundElement()\n\t\t\tthis._progressColor = element? window.getComputedStyle(element)\n\t\t\t\t.getPropertyValue('color') : null\n\t\t}\n\t\treturn this._progressColor\n\t}\n\n\tprivate get progressBackground() {\n\t\tif (!this._progressBackground) {\n\t\t\tconst element = this.getForegroundElement()\n\t\t\tthis._progressBackground = element? window.getComputedStyle(element)\n\t\t\t\t.getPropertyValue('background-color') : null\n\t\t}\n\t\treturn this._progressBackground\n\t}\n\n\tget background() {\n\t\tif (!this._background !== undefined) {\n\t\t\tconst element = this.getBackgroundElement()\n\t\t\tif (!element) { this._background = 'inherit' }\n\t\t\tthis._background = window.getComputedStyle(element)\n\t\t\t\t.getPropertyValue('background-color')\n\t\t}\n\t\treturn this._background\n\t}\n\n\tprivate progressArc() {\n\t\tconst { progressBackground, progressColor } = this\n\t\tif (!progressBackground || !progressColor) { return \"\" }\n\t\tlet deg, result\n\t\tif (this.interpolatedProgress <= 0.5) {\n\t\t\tdeg = 90 + 180 * this.interpolatedProgress * 2\n\t\t\tresult = `linear-gradient(90deg, ${progressBackground} 50%, rgba(0, 0, 0, 0) 50%, rgba(0, 0, 0, 0)), linear-gradient(${deg}deg, ${progressColor} 50%, ${progressBackground} 50%, ${progressBackground})`\n\t\t} else {\n\t\t\tdeg = -90 + 180 * (2 * (this.interpolatedProgress-.5))\n\t\t\tresult = `linear-gradient(${deg}deg, ${progressColor} 50%, rgba(0, 0, 0, 0) 50%, rgba(0, 0, 0, 0)), linear-gradient(270deg, ${progressColor} 50%, ${progressBackground} 50%, ${progressBackground})`\n\t\t}\n\t\treturn result\n\t}\n\n\tprivate divToStyle\n\tprivate interpolatedProgress = 0\n\tprivate animationStep = (time) => {\n\n\t\tif (!this.divToStyle) {\n\t\t\twindow.requestAnimationFrame(this.animationStep)\n\t\t\tthis.divToStyle = this.element.nativeElement.querySelector('div')\n\n\t\t} else {\n\t\t\tconst progress = this.progress()\n\n\t\t\tif (progress < this.interpolatedProgress || progress === 1) {\n\t\t\t\tthis.interpolatedProgress = progress\n\n\t\t\t} else {\n\t\t\t\tthis.interpolatedProgress += (progress - this.interpolatedProgress) / INTERPOLATION_SCALING\n\t\t\t}\n\n\t\t\tthis.divToStyle.setAttribute(\"style\", `background-image: ${this.progressArc()}`);\n\n\t\t\tif (this.interpolatedProgress !== 1) {\n\t\t\t\twindow.requestAnimationFrame(this.animationStep)\n\t\t\t}\n\t\t}\n\t}\n\n\tconstructor(private element: ElementRef) {\n\n\t\t// [ngStyle]=\"{'background-image': progressArc}\"\n\t\twindow.requestAnimationFrame(this.animationStep)\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/loadingProgress.ts","import { Component } from \"@angular/core\";\n\n@Component({\n\tselector: \"hexagon\",\n\ttemplateUrl: \"hexagon.svg\"\n})\nexport class HexagonComponent {\n\tconstructor() {};\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/hexagon.ts","import { Component } from \"@angular/core\";\n\n@Component({\n\tselector: \"navigator-hexagon\",\n\ttemplateUrl: \"hexagon.svg\"\n})\nexport class NavigatorHexagon {\n\tconstructor() {};\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/navigator/hexagon.ts","import { Component, Input } from \"@angular/core\"\n\n@Component({\n\tselector: \"navigator-icon\",\n\ttemplateUrl: \"icon.html\"\n})\nexport class NavigatorIcon {\n\t@Input() icon: string = 'plus'\n\tconstructor() { }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/navigator/icon.ts","import State from \"../asset/state\";\nimport * as Bluebird from \"bluebird\";\nimport { withPrefix } from \"../services/storage.service\";\n\nimport socketService from \"../services/socket.service\";\n\nimport { loginPage, isLoginPage } from \"../services/location.manager\";\n\nconst chelper = require(\"crypto/helper\");\nconst errors = require(\"asset/errors\");\n\nconst loginState = new State();\n\nexport const failureCodes = {\n\tUNKNOWNNAME: 0,\n\tWRONGPASSWORD: 1,\n\tNOCONNECTION: 2,\n\tSECURITY: 4,\n\tUNKNOWN: 5\n};\n\nconst sessionStorage = withPrefix(\"whispeer.session\");\nconst loginStorage = withPrefix(\"whispeer.login\");\n\nfunction upgradeLocalStorage() {\n\ttry {\n\t\tif (localStorage.getItem(\"loggedin\") === \"true\") {\n\t\t\tvar sid = localStorage.getItem(\"sid\");\n\t\t\tvar userid = localStorage.getItem(\"userid\");\n\t\t\tvar password = localStorage.getItem(\"password\");\n\n\t\t\tlocalStorage.clear();\n\n\t\t\t//migrate to new format\n\t\t\tsessionStorage.set(\"loggedin\", \"true\");\n\t\t\tsessionStorage.set(\"sid\", sid);\n\t\t\tsessionStorage.set(\"userid\", userid);\n\t\t\tsessionStorage.set(\"password\", password);\n\t\t}\n\t} catch (e) {\n\t\tconsole.warn(\"no local storage\");\n\t}\n}\n\nupgradeLocalStorage();\n\nclass LoginService {\n\tidentifier: string;\n\tpassword: string = \"\";\n\tfailureCode: number;\n\tstate = loginState.data;\n\tfailedOnce = false;\n\tloadedStorage: Bluebird<void>;\n\n\tconstructor () {\n\t\tthis.identifier = loginStorage.get(\"identifier\");\n\t\tthis.failureCode = parseInt(loginStorage.get(\"failureCode\"), 10);\n\n\t\tthis.loadedStorage = loginStorage.awaitLoading().then(() => {\n\t\t\tthis.identifier = loginStorage.get(\"identifier\");\n\t\t\tthis.failureCode = parseInt(loginStorage.get(\"failureCode\"), 10);\n\n\t\t\tloginStorage.remove(\"failureCode\");\n\t\t\tloginStorage.save();\n\n\t\t\treturn null;\n\t\t});\n\t}\n\n\tloginServer (name: string, password: string, callback?: Function) {\n\t\treturn Bluebird.try(() => {\n\t\t\treturn socketService.emit(\"session.token\", {\n\t\t\t\tidentifier: name\n\t\t\t});\n\t\t}).catch(function (e) {\n\t\t\tif (e.name === \"disconnectedError\") {\n\t\t\t\tthrow new errors.LoginError(\"Login failed\", { failure: failureCodes.NOCONNECTION });\n\t\t\t}\n\n\t\t\tconsole.log(e);\n\t\t\tthrow new errors.LoginError(\"Login failed\", { failure: failureCodes.UNKNOWNNAME });\n\t\t}).then((data) => {\n\t\t\tif (data.salt.length !== 16) {\n\t\t\t\tthrow new errors.LoginError(\"Login failed\", { failure: failureCodes.SECURITY });\n\t\t\t}\n\n\t\t\tvar hash = chelper.hashPW(password, data.salt);\n\n\t\t\thash = chelper.hash(hash + data.token);\n\t\t\treturn socketService.emit(\"session.login\", {\n\t\t\t\tidentifier: name,\n\t\t\t\tpassword: hash,\n\t\t\t\ttoken: data.token\n\t\t\t}).catch(function (e: any) {\n\t\t\t\tif (e.name === \"disconnectedError\") {\n\t\t\t\t\tthrow new errors.LoginError(\"Login failed\", { failure: failureCodes.NOCONNECTION });\n\t\t\t\t}\n\n\t\t\t\tconsole.log(e);\n\t\t\t\tthrow new errors.LoginError(\"Login failed\", { failure: failureCodes.WRONGPASSWORD });\n\t\t\t});\n\t\t}).then(function (data) {\n\t\t\tsessionStorage.set(\"sid\", data.sid);\n\t\t\tsessionStorage.set(\"userid\", data.userid);\n\t\t\tsessionStorage.set(\"loggedin\", true);\n\t\t\tsessionStorage.set(\"password\", password);\n\n\t\t\treturn sessionStorage.save();\n\t\t}).catch(function (e) {\n\t\t\tconsole.log(e);\n\t\t\tthrow e;\n\t\t}).nodeify(callback);\n\t};\n\n\tlogin () {\n\t\tloginState.pending();\n\n\t\tloginStorage.set(\"identifier\", this.identifier || \"\");\n\t\tloginStorage.save().then(() => {\n\t\t\treturn this.loginServer(this.identifier, this.password);\n\t\t}).then(() => {\n\t\t\tloginState.success();\n\t\t}).catch((e) => {\n\t\t\tloginState.failed();\n\n\t\t\tthis.failureCode = e.data.failure;\n\t\t\tthis.failedOnce = true;\n\n\t\t\tif (!isLoginPage()) {\n\t\t\t\tloginStorage.set(\"failureCode\", e.failure);\n\t\t\t\tloginStorage.save().then(() => {\n\t\t\t\t\tloginPage();\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n};\n\nexport default new LoginService();\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/services/login.service.ts","import { Component } from '@angular/core';\nimport { NavController, NavParams, IonicPage } from 'ionic-angular';\nimport { StatusBar } from \"@ionic-native/status-bar\";\n\nimport sessionService from '../../lib/services/session.service';\nimport { failureCodes } from \"../../lib/services/login.service\";\nimport loginService from \"../../lib/services/login.service\";\nimport passwordStrength from '../../lib/services/passwordStrength.service'\n\nconst registerService = require('../../lib/services/registerService');\nimport whispeerHelper from \"../../lib/helper/helper\"\n\nimport { TranslateService } from '@ngx-translate/core';\n\nimport { isBusinessVersion, goToPrivateHome, goToBusinessVersion } from '../../lib/services/location.manager'\n\nconst focusSelector = (selector) => {\n\tconst e = document.querySelector(selector)\n\n\tif (e) {\n\t\te.focus()\n\t}\n}\n\n@IonicPage({\n\tname: \"Login\",\n\tsegment: \"login\"\n})\n@Component({\n\tselector: 'page-login',\n\ttemplateUrl: 'login.html'\n})\nexport class LoginPage {\n\n\tlogin: typeof loginService;\n\tpasswordRepeat: string = \"\";\n\n\tusernameState: number = USERNAME_UNKNOWN;\n\n\ttutorialDisabled = true;\n\n\tbusiness = isBusinessVersion();\n\n\tconstructor(public navCtrl: NavController, public navParams: NavParams, private statusBar: StatusBar, private translate: TranslateService) {\n\t\tthis.statusBar.styleDefault();\n\n\t\tthis.login = loginService;\n\t\tloginService.loadedStorage.then(() => {\n\t\t\tthis.checkUserNameExistance();\n\t\t\t(loginService.identifier\n\t\t\t\t? focusSelector(\"#password input\")\n\t\t\t\t: focusSelector(\"#mail input\"))\n\t\t});\n\t}\n\n\tgoToOtherHome() {\n\t\tif (this.business) {\n\t\t\tgoToPrivateHome()\n\t\t} else {\n\t\t\tgoToBusinessVersion()\n\t\t}\n\t}\n\n\tionViewCanEnter(): boolean {\n\t\treturn !sessionService.loggedin\n\t}\n\n\tprivate mainPage() {\n\t\tthis.navCtrl.remove(0, this.navCtrl.length() - 1)\n\t\tthis.navCtrl.setRoot(\"Home\")\n\t}\n\n\tgetTranslation(key) {\n\t\treturn this.translate.instant(`login.${key}`)\n\t}\n\n\tgetMessage() {\n\t\tswitch (this.usernameState) {\n\t\t\tcase USERNAME_TAKEN:\n\t\t\t\treturn this.getTranslation(\"messages.ambiguousProcess\");\n\t\t\tcase USERNAME_FREE:\n\t\t\t\treturn this.getTranslation(\"messages.registerMessage\");\n\t\t\tcase USERNAME_INVALID:\n\t\t\t\treturn this.getTranslation(\"messages.invalidUsername\");\n\t\t\tcase USERNAME_LOGIN_SUCCESS:\n\t\t\t\treturn this.getTranslation(\"messages.loginSuccess\");\n\t\t\tcase USERNAME_REGISTER_SUCCESS:\n\t\t\t\treturn this.getTranslation(\"messages.registerSuccess\");\n\t\t\tcase USERNAME_NO_CONNECTION:\n\t\t\t\treturn this.getTranslation(\"messages.noConnection\");\n\t\t\tcase USERNAME_LOGIN_INCORRECT_PASSWORD:\n\t\t\t\treturn this.getTranslation(\"messages.incorrectPassword\");\n\t\t\tcase USERNAME_PASSWORDS_DONT_MATCH:\n\t\t\t\treturn this.getTranslation(\"messages.passwordsDontMatch\");\n\t\t\tcase USERNAME_PASSWORD_TOO_SHORT:\n\t\t\t\treturn this.getTranslation(\"messages.passwordTooShort\");\n\t\t\tcase USERNAME_LOGIN_ERROR:\n\t\t\tcase USERNAME_REGISTER_ERROR:\n\t\t\t\treturn this.getTranslation(\"messages.genericErrorMessage\");\n\t\t\tcase USERNAME_PASSWORD_CONFIRM:\n\t\t\t\treturn this.getTranslation(\"messages.confirmPassword\");\n\n\t\t\tcase USERNAME_EMPTY:\n\t\t\tcase USERNAME_UNKNOWN:\n\t\t\tdefault:\n\t\t\t\treturn this.getTranslation(\"messages.defaultCallToAction\");\n\t\t}\n\t}\n\n\tionViewDidLoad() {\n\t\tconsole.log(\"ionViewDidLoad LoginPage\");\n\t}\n\n\tshowPasswordFeld() {\n\t\treturn !this.showPasswordConfirmationField()\n\t}\n\n\tshowPasswordConfirmationField() {\n\t\treturn [USERNAME_PASSWORD_CONFIRM].indexOf(this.usernameState) !== -1\n\t}\n\n\tcheckUserNameExistance = () => {\n\t\tconst { identifier: nick } = this.login\n\t\tif (!nick) {\n\t\t\tthis.usernameState = USERNAME_EMPTY;\n\t\t} else if (!whispeerHelper.isNickname(nick)) {\n\t\t\tthis.usernameState = USERNAME_INVALID;\n\t\t} else {\n\t\t\tregisterService.nicknameUsed(nick).then((isUsed) => {\n\t\t\t\tif (this.login.identifier !== nick) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tthis.usernameState = isUsed\n\t\t\t\t\t? USERNAME_TAKEN\n\t\t\t\t\t: USERNAME_FREE;\n\t\t\t});\n\t\t}\n\t}\n\n\tfocusInput(id, repeated = false) {\n\t\tfocusSelector(`#${id} .text-input`)\n\n\t\tif (repeated) {\n\t\t\treturn\n\t\t}\n\n\t\tsetTimeout(() => this.focusInput(id, true), 100)\n\t}\n\n\tperformLogin() {\n\t\tconst { identifier: nick, password: pass } = this.login;\n\n\t\treturn loginService.loginServer(nick, pass);\n\t}\n\n\tperformRegister() {\n\t\tconst { identifier: nick, password: pass } = this.login;\n\t\tconst email = '';\n\t\tconst defaultSettings = {\n\t\t\tmeta: {\n\t\t\t\tinitialLanguage: \"en\"\n\t\t\t},\n\t\t\tcontent: {}\n\t\t};\n\t\tconst defaultProfile = {\n\t\t\tpub: {},\n\t\t\tpriv: {},\n\t\t\tnobody: {},\n\t\t\tmetaData: {\n\t\t\t\tscope: \"always:allfriends\"\n\t\t\t}\n\t\t};\n\t\treturn registerService.register(nick, email, pass, defaultProfile, defaultSettings);\n\t}\n\n\tpasswordsMatch() {\n\t\treturn (\n\t\t\t(this.login.password === this.passwordRepeat)\n\t\t\t&& (this.login.password.length !== 0)\n\t\t)\n\t}\n\n\tpasswordSet() {\n\t\treturn Boolean(this.login.password)\n\t}\n\n\tgetLoginErrorCode = (error) => {\n\t\tswitch(error.data.failure) {\n\t\t\tcase failureCodes.WRONGPASSWORD:\n\t\t\t\treturn USERNAME_LOGIN_INCORRECT_PASSWORD;\n\t\t\tcase failureCodes.NOCONNECTION:\n\t\t\t\treturn USERNAME_NO_CONNECTION;\n\t\t\tcase failureCodes.UNKNOWNNAME:\n\t\t\t\treturn USERNAME_FREE;\n\t\t\tdefault:\n\t\t\t\treturn USERNAME_LOGIN_ERROR;\n\t\t}\n\t}\n\n\tpasswordToShort = () => {\n\t\treturn passwordStrength(this.login.password) === 0\n\t}\n\n\tloadLogin = () =>\n\t\tsessionService.loadLogin().then(() => {\n\t\t\tthis.statusBar.styleLightContent()\n\t\t\tthis.mainPage()\n\t\t})\n\n\tloginOrRegister = () => {\n\t\tif ([USERNAME_TAKEN, USERNAME_LOGIN_INCORRECT_PASSWORD, USERNAME_NO_CONNECTION, USERNAME_LOGIN_ERROR].indexOf(this.usernameState) !== -1) {\n\t\t\tif (!this.passwordSet()) {\n\t\t\t\tthis.focusInput(\"password\")\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// login\n\t\t\tthis.performLogin().then(() => {\n\t\t\t\tthis.usernameState = USERNAME_LOGIN_SUCCESS\n\t\t\t\treturn this.loadLogin()\n\t\t\t}).catch((error) => {\n\t\t\t\tthis.usernameState = this.getLoginErrorCode(error);\n\t\t\t})\n\n\t\t} else if ([USERNAME_FREE, USERNAME_PASSWORD_TOO_SHORT, USERNAME_PASSWORDS_DONT_MATCH, USERNAME_REGISTER_ERROR].indexOf(this.usernameState) !== -1) {\n\t\t\tif (!this.passwordSet()) {\n\t\t\t\tthis.focusInput(\"password\")\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.passwordToShort()) {\n\t\t\t\tthis.usernameState = USERNAME_PASSWORD_TOO_SHORT;\n\n\t\t\t\tthis.focusInput(\"password\")\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.usernameState = USERNAME_PASSWORD_CONFIRM\n\t\t\tthis.focusInput(\"password2\")\n\t\t} else if ([USERNAME_PASSWORD_CONFIRM].indexOf(this.usernameState) !== -1) {\n\t\t\tconst registerError = (e) => {\n\t\t\t\tconsole.error(e);\n\t\t\t\tthis.usernameState = USERNAME_REGISTER_ERROR;\n\t\t\t}\n\n\t\t\tif (this.passwordsMatch()) {\n\t\t\t\tthis.performRegister().then(() => {\n\t\t\t\t\tthis.usernameState = USERNAME_REGISTER_SUCCESS;\n\n\t\t\t\t\treturn this.loadLogin()\n\t\t\t\t}).catch(registerError);\n\t\t\t} else {\n\t\t\t\tthis.usernameState = USERNAME_PASSWORDS_DONT_MATCH;\n\n\t\t\t\tthis.focusInput(\"password\")\n\n\t\t\t\tthis.login.password = \"\";\n\t\t\t\tthis.passwordRepeat = \"\";\n\t\t\t}\n\t\t}\n\t}\n}\n\nconst USERNAME_UNKNOWN = -1;\nconst USERNAME_EMPTY = 1;\nconst USERNAME_INVALID = 2;\nconst USERNAME_TAKEN = 3;\nconst USERNAME_FREE = 4;\nconst USERNAME_LOGIN_ERROR = 5;\nconst USERNAME_LOGIN_SUCCESS = 6;\nconst USERNAME_PASSWORD_CONFIRM = 7;\nconst USERNAME_REGISTER_SUCCESS = 8;\nconst USERNAME_REGISTER_ERROR = 9;\nconst USERNAME_LOGIN_INCORRECT_PASSWORD = 10;\nconst USERNAME_NO_CONNECTION = 11;\nconst USERNAME_PASSWORDS_DONT_MATCH = 12;\nconst USERNAME_PASSWORD_TOO_SHORT = 13;\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts","export default (password: string) => {\n\tif (!password) { return 0; } // obsolete when completely turned to ts\n\n\tvar strength = 1;\n\n\t/*\n\t\t>=7  +1*1\n\t\t>=10 +1\n\t\t>=13 +1\n\t\t>=16 +1\n\t\t>=20 +1\n\t\tGross&Klein +2\n\t\t1 Sonderzeichen +1\n\t\t1 Sonderzeichen +1\n\t\tZahl +1\n\t*/\n\n\tif (password.length < 8) { return 0; } // Greater than 8 chars minimum!\n\n\tif (password.length >= 10) { strength += 1; } // Longer than 10 chars\n\tif (password.length >= 13) { strength += 2; } // Longer than 13 chars\n\tif (password.length >= 16) { strength += 2; } // Longer than 16 chars\n\tif (password.length >= 20) { strength += 1; } // Longer than 20 chars\n\tif ((password.match(/[a-z]/)) && (password.match(/[A-Z]/))) { strength += 1; } // Mix of upper and lower chars\n\tif (password.match(/\\d+/)) { strength += 1; } // Contains a number\n\tif (password.match(/[+,!,@,#,$,%,\\^,&,*,?,_,~,\\-]/)) { strength += 1; } // Contains a special chars\n\n\treturn strength;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/services/passwordStrength.service.ts","var keyStoreService = require(\"services/keyStore.service\").default;\nvar socketService = require(\"services/socket.service\").default;\nvar Profile = require(\"users/profile\").default;\nvar Storage = require(\"services/storage.service\");\nvar errorService = require(\"services/error.service\").errorServiceInstance;\n\nvar Bluebird = require(\"bluebird\");\nvar h = require(\"../helper/helper\").default;\n\nvar trustManager = require(\"crypto/trustManager\");\nvar SecuredData = require(\"asset/securedDataWithMetaData\");\n\nvar keyGenPromise, sessionStorage = Storage.withPrefix(\"whispeer.session\"), clientStorage = Storage.withPrefix(\"whispeer.client\");\nvar registerPromise;\n\nvar registerService = {\n\tregister: function (nickname, mail, password, profile, settings, inviteCode) {\n\t\tvar keys;\n\n\t\tif (!registerPromise) {\n\t\t\tregisterPromise = Bluebird.try(function register1() {\n\t\t\t\treturn registerService.startKeyGeneration();\n\t\t\t}).then(function register2(theKeys) {\n\t\t\t\tkeys = theKeys;\n\n\t\t\t\tif (nickname) {\n\t\t\t\t\tkeyStoreService.setKeyGenIdentifier(nickname);\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error(\"need nickname\");\n\t\t\t\t}\n\n\t\t\t\tvar privateProfile = new Profile({\n\t\t\t\t\tcontent: profile.priv\n\t\t\t\t});\n\n\t\t\t\tvar privateProfileMe = new Profile({\n\t\t\t\t\tcontent: h.objectJoin(h.objectJoin(profile.priv, profile.pub), profile.nobody),\n\t\t\t\t\tmeta: { myProfile: true }\n\t\t\t\t});\n\n\t\t\t\tvar publicProfile = new Profile({\n\t\t\t\t\tcontent: profile.pub || {}\n\t\t\t\t}, { isPublicProfile: true });\n\n\t\t\t\tvar correctKeys = h.objectMap(keys, keyStoreService.correctKeyIdentifier);\n\t\t\t\tvar ownKeys = {main: correctKeys.main, sign: correctKeys.sign};\n\t\t\t\tdelete correctKeys.main;\n\t\t\t\tdelete correctKeys.profile;\n\n\t\t\t\tvar signedKeys = SecuredData.load(undefined, correctKeys, { type: \"signedKeys\" });\n\n\t\t\t\ttrustManager.allow(5);\n\n\t\t\t\treturn Bluebird.all([\n\t\t\t\t\tprivateProfile.signAndEncrypt(keys.sign, keys.profile),\n\t\t\t\t\tprivateProfileMe.signAndEncrypt(keys.sign, keys.main),\n\t\t\t\t\tpublicProfile.sign(keys.sign),\n\n\t\t\t\t\tSecuredData.createAsync(settings.content, settings.meta, { type: \"settings\" }, keys.sign, keys.main),\n\n\t\t\t\t\tsignedKeys.sign(keys.sign),\n\n\t\t\t\t\tkeyStoreService.security.makePWVerifiable(ownKeys, password),\n\n\t\t\t\t\tkeyStoreService.random.hex(16),\n\n\t\t\t\t\tkeyStoreService.sym.pwEncryptKey(keys.main, password),\n\t\t\t\t\tkeyStoreService.sym.symEncryptKey(keys.profile, keys.friends),\n\t\t\t\t]);\n\t\t\t}).spread(function register3(privateProfile, privateProfileMe, publicProfile, settings, signedKeys, signedOwnKeys, salt) {\n\t\t\t\tkeys = h.objectMap(keys, keyStoreService.correctKeyIdentifier);\n\t\t\t\ttrustManager.disallow();\n\n\t\t\t\tvar registerData = {\n\t\t\t\t\tpassword: {\n\t\t\t\t\t\tsalt: salt,\n\t\t\t\t\t\thash: keyStoreService.hash.hashPW(password, salt),\n\t\t\t\t\t},\n\t\t\t\t\tkeys: h.objectMap(keys, keyStoreService.upload.getKey),\n\t\t\t\t\tsignedKeys: signedKeys,\n\t\t\t\t\tsignedOwnKeys: signedOwnKeys,\n\t\t\t\t\tinviteCode: \"whispeerfj\",\n\t\t\t\t\tprofile: {\n\t\t\t\t\t\tpub: publicProfile,\n\t\t\t\t\t\tpriv: [privateProfile],\n\t\t\t\t\t\tme: privateProfileMe\n\t\t\t\t\t},\n\t\t\t\t\tsettings: settings\n\t\t\t\t};\n\n\t\t\t\tif (mail) {\n\t\t\t\t\tregisterData.mail = mail;\n\t\t\t\t}\n\n\t\t\t\tif (nickname) {\n\t\t\t\t\tregisterData.nickname = nickname;\n\t\t\t\t}\n\n\t\t\t\tif (inviteCode) {\n\t\t\t\t\tregisterData.inviteCode = inviteCode;\n\t\t\t\t}\n\n\t\t\t\tregisterData.preID = clientStorage.get(\"preID\") || \"\";\n\n\t\t\t\treturn socketService.emit(\"session.register\", registerData);\n\t\t\t}).then(function (result) {\n\t\t\t\tif (result.sid) {\n\t\t\t\t\tsessionStorage.set(\"sid\", result.sid);\n\t\t\t\t\tsessionStorage.set(\"userid\", result.userid);\n\t\t\t\t\tsessionStorage.set(\"loggedin\", true);\n\t\t\t\t\tsessionStorage.set(\"password\", password);\n\t\t\t\t}\n\n\t\t\t\tkeyStoreService.security.setPassword(password);\n\n\t\t\t\treturn result;\n\t\t\t}).finally(function () {\n\t\t\t\tregisterPromise = null;\n\t\t\t});\n\t\t}\n\n\t\treturn registerPromise;\n\t},\n\tsetPreID: function () {\n\t\tBluebird.try(function () {\n\t\t\treturn socketService.awaitConnection();\n\t\t}).then(function () {\n\t\t\tif (clientStorage.get(\"preID\")) {\n\t\t\t\treturn clientStorage.get(\"preID\");\n\t\t\t}\n\n\t\t\treturn keyStoreService.random.hex(40);\n\t\t}).then(function (preID) {\n\t\t\tclientStorage.set(\"preID\", preID);\n\n\t\t\treturn socketService.emit(\"preRegisterID\", {\n\t\t\t\tid: preID\n\t\t\t});\n\t\t}).catch(errorService.criticalError);\n\t},\n\n\tstartKeyGeneration: function () {\n\t\tvar toGenKeys = [\n\t\t\t[\"main\", \"sym\"],\n\t\t\t[\"sign\", \"sign\"],\n\t\t\t[\"crypt\", \"asym\"],\n\t\t\t[\"profile\", \"sym\"],\n\t\t\t[\"friends\", \"sym\"]\n\t\t];\n\n\t\tvar ks = keyStoreService;\n\n\t\tfunction getCorrectKeystore(key) {\n\t\t\treturn ks[key[1]];\n\t\t}\n\n\t\tif (!keyGenPromise) {\n\t\t\tkeyGenPromise = Bluebird.try(function () {\n\t\t\t\treturn Bluebird.all(toGenKeys.map(function (key) {\n\t\t\t\t\treturn getCorrectKeystore(key).generateKey(null, key[0]);\n\t\t\t\t})).then(function (resultKeys) {\n\t\t\t\t\tvar keys = {};\n\n\t\t\t\t\treturn Bluebird.all(toGenKeys.map(function (key, index) {\n\t\t\t\t\t\tvar resultKey = resultKeys[index];\n\n\t\t\t\t\t\tkeys[key[0]] = resultKey;\n\n\t\t\t\t\t\tif (index > 0) {\n\t\t\t\t\t\t\treturn getCorrectKeystore(key).symEncryptKey(resultKey, resultKeys[0]);\n\t\t\t\t\t\t}\n\t\t\t\t\t})).thenReturn(keys);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\treturn keyGenPromise;\n\t},\n\n\tmailUsed: function (mail, callback) {\n\t\tif (mail === \"\" || !h.isMail(mail)) {\n\t\t\treturn Bluebird.resolve(true).nodeify(callback);\n\t\t}\n\n\t\treturn Bluebird.try(function mailCheck() {\n\t\t\treturn socketService.emit(\"mailFree\", {\n\t\t\t\tmail: mail\n\t\t\t});\n\t\t}).then(function mailResult(data) {\n\t\t\tif (data.mailUsed === true) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (data.mailUsed === false) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tthrow new Error(\"invalid server response\");\n\t\t}).nodeify(callback);\n\t},\n\n\tnicknameUsed: function (nickname, callback) {\n\t\tif (nickname === \"\" || !h.isNickname(nickname)) {\n\t\t\treturn Bluebird.resolve(true).nodeify(callback);\n\t\t}\n\n\t\treturn socketService.awaitConnection().then(function () {\n\t\t\treturn socketService.emit(\"nicknameFree\", {\n\t\t\t\tnickname: nickname\n\t\t\t});\n\t\t}).then(function nicknameResult(data) {\n\t\t\tif (data.nicknameUsed === true) {\n\t\t\t\treturn true;\n\t\t\t} else if (data.nicknameUsed === false) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tthrow new Error(\"invalid server response\");\n\t\t}).nodeify(callback);\n\t}\n};\n\nmodule.exports = registerService;\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/services/registerService.js"],"sourceRoot":""}