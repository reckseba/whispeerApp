<!--
	Generated template for the Profile page.

	See http://ionicframework.com/docs/v2/components/#navigation for more info on
	Ionic pages and navigation.
-->
<ion-header>

	<ion-navbar [color]="'primary'">
		<ion-title><span *ngIf="!isOwn">{{user.name}}'s</span> Profile</ion-title>
	</ion-navbar>

</ion-header>

<ion-content padding *ngIf="isRequest || isRequestable">
	<ion-spinner *ngIf="profileLoading" text-center margin-vertical class="spinner--full"></ion-spinner>
	<h4 class="text-primary text-medium" text-center padding>Add this person as a contact?</h4>
	<div class="profile__avatar-row">
		<div class="hexagon profile__request-hex" id="request__decline" (click)="declineRequest()">
			<button ion-button icon-only class="hexagon__button hexagon__button--medium profile__request-button" id="request__decline__button">
				<ion-icon name="close"></ion-icon>
			</button>
		</div>
		<ion-avatar class="hexagon__image hexagon__image--active hexagon__image--large profile__image">
			<user-image [id]="user.id" [image]="user.basic.image"></user-image>
		</ion-avatar>
		<div class="hexagon profile__request-hex" (click)="acceptRequest()">
			<button ion-button icon-only class="hexagon__button hexagon__button--medium profile__request-button" id="request__accept__button">
				<ion-icon name="checkmark"></ion-icon>
			</button>
		</div>
	</div>
	<ion-list class="profile__info-list space-for-fab">
		<ion-item>
			<ion-label fixed color="primaryDarker" text-right>Account</ion-label>
			<p item-content padding-horizontal class="profile__info">{{user.names.nickname}}</p>
		</ion-item>
		<ion-item>
			<ion-label fixed color="primaryDarker" text-right>Name</ion-label>
			<p item-content padding-horizontal class="profile__info">{{user.names.firstname}}</p>
		</ion-item>
		<ion-item>
			<ion-label fixed color="primaryDarker" text-right>Surname</ion-label>
			<p item-content padding-horizontal class="profile__info">{{user.names.lastname}}</p>
		</ion-item>
	</ion-list>
	<main-menu [icon]="'close'"></main-menu>
</ion-content>

<ion-content *ngIf="!isRequest && !isRequestable">
	<div padding *ngIf="isOwn">
		<ion-segment [(ngModel)]="view" color="dark">
			<ion-segment-button value="profile">
				Profile
			</ion-segment-button>
			<ion-segment-button value="qr">
				QR-Code
			</ion-segment-button>
		</ion-segment>
	</div>
	<ion-spinner *ngIf="profileLoading" text-center margin-vertical class="spinner--full"></ion-spinner>
	<div [ngSwitch]="view">

		<div *ngSwitchCase="'profile'">

			<ion-avatar class="hexagon__image hexagon__image--active hexagon__image--large profile__image">
				<user-image [id]="user.id" [image]="user.basic.image"></user-image>
			</ion-avatar>
			<ion-list class="profile__info-list space-for-fab">
				<ion-item>
					<ion-label fixed color="primaryDarker" text-right>Account</ion-label>
					<p item-content padding-horizontal class="profile__info">{{user.names.nickname}}</p>
				</ion-item>
				<ion-item>
					<ion-label fixed color="primaryDarker" text-right>Name</ion-label>
					<p item-content padding-horizontal class="profile__info">{{user.names.firstname}}</p>
				</ion-item>
				<ion-item>
					<ion-label fixed color="primaryDarker" text-right>Surname</ion-label>
					<p item-content padding-horizontal class="profile__info">{{user.names.lastname}}</p>
				</ion-item>
			</ion-list>

		</div>
		<div *ngSwitchCase="'qr'">

			<qr-code [data]="user.fingerprint" [size]="150" class="profile__qr"></qr-code>

			<ion-grid class="fingerprint">
				<ion-row>
					<ion-col class="fingerprint-label" col-3>Your ID<br/> as a text</ion-col>
					<ion-col class="fingerprint-value" col-9>
						<pre *ngFor="let part of fingerprint" class="fingerprint-part">{{part}}</pre>
					</ion-col>
				</ion-row>
			</ion-grid>

			<div class="space-for-fab" padding-horizontal>
				<p class="text-grey">This is your personal and unique ID for whispeer. You need this <span class="text-primary">to verify with friends</span> on whispeer - for extra security.</p>
			</div>

		</div>
	</div>
	<main-menu [icon]="'close'" (mainHandle)="close()" ion-fixed></main-menu>
</ion-content>
