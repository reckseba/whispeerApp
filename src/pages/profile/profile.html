<!--
	Generated template for the Profile page.

	See http://ionicframework.com/docs/v2/components/#navigation for more info on
	Ionic pages and navigation.
-->
<ion-header>

	<ion-navbar [color]="'primary'">
		<ion-title><span *ngIf="!isOwn">{{user.basic.firstname}}'s</span> Profile</ion-title>
	</ion-navbar>

</ion-header>

<ion-content padding *ngIf="!isOwn">
	<ion-spinner *ngIf="profileLoading" text-center margin-vertical class="spinner--full"></ion-spinner>
	<h4 class="text-primary text-medium" text-center padding>Add this person as a contact?</h4>
	<div class="profile__avatar-row">
		<div class="hexagon profile__request-hex" id="request__decline" (click)="acceptRequest()">
			<button ion-button icon-only class="hexagon__button hexagon__button--medium profile__request-button" id="request__decline__button">
				<ion-icon name="close"></ion-icon>
			</button>
		</div>
		<ion-avatar class="hexagon__image hexagon__image--active hexagon__image--large profile__image">
			<div class="hexagon__image__image" [style.background-image]="user.image"></div>
		</ion-avatar>
		<div class="hexagon profile__request-hex" (click)="declineRequest()">
			<button ion-button icon-only class="hexagon__button hexagon__button--medium profile__request-button" id="request__accept__button">
				<ion-icon name="checkmark"></ion-icon>
			</button>
		</div>
	</div>
	<ion-list class="profile__info-list space-for-fab">
		<ion-item>
			<ion-label fixed color="primaryDarker" text-right>Account</ion-label>
			<p item-content padding-horizontal class="profile__info">{{user.basic.nickname}}</p>
		</ion-item>
		<ion-item>
			<ion-label fixed color="primaryDarker" text-right>Name</ion-label>
			<p item-content padding-horizontal class="profile__info">{{user.basic.firstname}}</p>
		</ion-item>
		<ion-item>
			<ion-label fixed color="primaryDarker" text-right>Surname</ion-label>
			<p item-content padding-horizontal class="profile__info">{{user.basic.lastname}}</p>
		</ion-item>
	</ion-list>
	<ion-fab center bottom #fab>
		<div class="hexagon hexagon--fab">
			<button (tap)="goBack()" class="hexagon__button" ion-fab color="light">
				<ion-icon name="close"></ion-icon>
			</button>
		</div>
	</ion-fab>
</ion-content>

<ion-content padding *ngIf="isOwn">
	<div padding-bottom>
		<ion-segment [(ngModel)]="view" color="dark">
			<ion-segment-button value="profile">
				Profile
			</ion-segment-button>
			<ion-segment-button value="qr">
				QR-Code
			</ion-segment-button>
		</ion-segment>
	</div>
	<ion-spinner *ngIf="profileLoading" text-center margin-vertical class="spinner--full"></ion-spinner>
	<div [ngSwitch]="view">
		<div *ngSwitchCase="'profile'">
			<ion-avatar class="hexagon__image hexagon__image--active hexagon__image--large profile__image">
				<div class="hexagon__image__image" [style.background-image]="user.image"></div>
			</ion-avatar>
			<ion-list class="profile__info-list space-for-fab">
				<ion-item>
					<ion-label fixed color="primaryDarker" text-right>Account</ion-label>
					<p item-content padding-horizontal class="profile__info">{{user.basic.nickname}}</p>
				</ion-item>
				<ion-item>
					<ion-label fixed color="primaryDarker" text-right>Name</ion-label>
					<p item-content padding-horizontal class="profile__info">{{user.basic.firstname}}</p>
				</ion-item>
				<ion-item>
					<ion-label fixed color="primaryDarker" text-right>Surname</ion-label>
					<p item-content padding-horizontal class="profile__info">{{user.basic.lastname}}</p>
				</ion-item>
			</ion-list>
		</div>
		<div *ngSwitchCase="'qr'">
			<qr-code [data]="user.fingerprint" [size]="150" class="profile__qr"></qr-code>
			<ion-list class="profile__fingerprint-list">
				<ion-item>
					<ion-label class="profile__key-label" fixed color="primaryDarker" text-right>Your ID</ion-label>
					<div item-content class="profile__key-part-wrap">
						<p *ngFor="let part of fingerprint; let l = last" class="profile__key-part">{{part}}{{l ? '' : ' - '}}</p>
					</div>
				</ion-item>
			</ion-list>

			<div class="space-for-fab" padding-horizontal>
				<p class="text-grey">This is your personal and unique ID for whispeer. You need this <span class="text-primary">to verify with friends</span> on whispeer - for extra security.</p>
			</div>
		</div>
	</div>
	<ion-fab center bottom #fab>
		<div class="hexagon hexagon--fab">
			<button (tap)="goBack()" class="hexagon__button" ion-fab color="light">
				<ion-icon name="close"></ion-icon>
			</button>
		</div>
	</ion-fab>
</ion-content>
