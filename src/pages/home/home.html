<ion-header>
	<ion-navbar [color]="'primaryDarker'" no-border>
		<ion-title>Messages</ion-title>
		<ion-buttons end>
			<button ion-button icon-only>
				<ion-icon name="options"></ion-icon>
			</button>
		</ion-buttons>
	</ion-navbar>
</ion-header>

<ion-content class="list-avatar-page">
	<ion-searchbar [showCancelButton]="true" animated [(ngModel)]="searchTerm" (ionInput)="getUsers()"></ion-searchbar>
	<ion-list>
		<!-- <ion-list-header>Yesterday</ion-list-header> -->
		<!-- User is online when its lastname is longer than 4. Hehe. -->
		<ion-item *ngFor="let topic of topics; let i = index" class="topic" [ngClass]="{'topic--online': topic.user.online, 'topic--new': topic.topic.newMessage, 'topic--new--last': topic.lastNew}" (click)="openChat(topic.id)">
			<ion-avatar item-left class="user__image">
				<div class="user__image__image" [style.background-image]="topic.user.image"></div>
			</ion-avatar>
			<h2>{{topic.user.name.first}} {{topic.user.name.last}}</h2>
			<p>{{topic.topic.lastMessage}}</p>
			<ion-note item-right>{{topic.topic.date | date: "EEEE"}} <ion-icon ios="ios-arrow-forward-outline"></ion-icon></ion-note>
		</ion-item>
	</ion-list>
	<ion-fab center bottom #fab>
		<div class="hexagon hexagon--fab">
			<button (press)="handleClick($event, fab)" (tap)="handleClick($event, fab)" class="hexagon__button" ion-fab color="light"><ion-icon name="add"></ion-icon></button>
		</div>
		<ion-fab-list side="top">
			<button ion-fab color="primary" (click)="test($event, fab)"><ion-icon name="logo-vimeo"></ion-icon></button>
		</ion-fab-list>
		<ion-fab-list side="left">
			<button ion-fab color="light" (click)="test($event, fab)"><ion-icon name="logo-googleplus"></ion-icon></button>
		</ion-fab-list>
		<ion-fab-list side="right">
			<button ion-fab color="dark" (click)="test($event, fab)"><ion-icon name="logo-twitter"></ion-icon></button>
		</ion-fab-list>
	</ion-fab>
</ion-content>